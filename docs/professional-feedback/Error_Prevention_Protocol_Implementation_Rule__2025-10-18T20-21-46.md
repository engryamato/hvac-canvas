[ ] NAME:Current Task List DESCRIPTION:Root task for conversation __NEW_AGENT__
-[/] NAME:HVAC Canvas - Complete PRD Implementation DESCRIPTION:Implement all requirements from prd.txt and prd_enhanced.txt including Glassmorphism Design Theme and Line Properties Modal Enhancement. Total effort: 520 hours over 12-13 weeks.
--[ ] NAME:PART 1: Glassmorphism Design Theme Implementation DESCRIPTION:Implement modern glassmorphism UI theme across entire application. 5 weeks, 200 hours. Priority: HIGH. Status: PARTIALLY COMPLETE (Modal only)
---[x] NAME:Phase 1: Glassmorphism Foundation (Week 1) DESCRIPTION:Set up design tokens, utility classes, browser fallbacks, accessibility media queries. Deliverables: glass-tokens.ts, glass-utilities.css. Effort: 40 hours. Status: COMPLETE (glassmorphism.css exists)
---[ ] NAME:Phase 2: Primary UI - Sidebar & Bottom Bar (Week 2) DESCRIPTION:Apply glass-tier1 to Sidebar and BottomBar. Test with PDF backgrounds, verify contrast ratios, performance testing. Effort: 40 hours. Status: PENDING
----[ ] NAME:Apply glass-tier1 to Sidebar component DESCRIPTION:Update src/components/DrawingCanvas/Sidebar.tsx: Add glass-tier1 class, update background to rgba(255,255,255,0.75), add backdrop-filter blur(12px) saturate(150%), enhance border and shadow. Test with PDF backgrounds.
----[ ] NAME:Apply glass-tier1 to BottomBar component DESCRIPTION:Update src/components/DrawingCanvas/BottomBar.tsx: Add glass-tier1 class, update background to rgba(255,255,255,0.75), add backdrop-filter blur(12px) saturate(150%), enhance border and shadow. Test zoom controls visibility.
----[ ] NAME:Test Sidebar/BottomBar with PDF backgrounds DESCRIPTION:Test glass effects with light, dark, and complex PDF backgrounds. Verify text readability (15.8:1 contrast ratio). Test with and without PDF loaded.
----[ ] NAME:Verify accessibility compliance for Primary UI DESCRIPTION:Run axe DevTools and WAVE audits. Verify high contrast mode, reduced motion, reduced transparency support. Test keyboard navigation and screen readers.
----[ ] NAME:Performance testing for Primary UI DESCRIPTION:Measure render time with Chrome DevTools. Target: <5ms per component. Verify 60fps maintained. Check GPU memory usage. Test on low-end devices.
---[/] NAME:Phase 3: Floating Elements - Modals & Overlays (Week 3) DESCRIPTION:Apply glass-tier2 to modals, enhance PDF Controls, update Draw Button. Test modal dragging, verify z-index layering. Effort: 40 hours. Status: PARTIALLY COMPLETE (Modal done)
----[ ] NAME:Enhance PDF Controls with glass effects DESCRIPTION:Update PDF Controls component: Refine existing glass effects to match tier2 specifications. Ensure 85% opacity, 10px blur. Test visibility over various PDF backgrounds.
----[ ] NAME:Update Draw Button inactive state with glass DESCRIPTION:Update DrawButton component: Apply glass-tier3 to inactive state. Ensure clear visual distinction between active and inactive states.
----[ ] NAME:Test modal dragging performance with glass DESCRIPTION:Test LinePropertiesModal dragging with glass effects. Verify smooth 60fps performance. Measure render time during drag (target: <7ms). Test will-change optimization.
----[ ] NAME:Verify z-index layering hierarchy DESCRIPTION:Test modal (z-1000) floats above sidebar (z-10) and bottom bar (z-10). Verify dropdown menus (z-1100) appear above modal. Test all overlay combinations.
---[/] NAME:Phase 4: Interactive Controls - Form Elements (Week 4) DESCRIPTION:Apply glass-tier3 to Dropdown, Button, Input, Chip components. Test all interactive states, keyboard navigation, screen readers. Effort: 40 hours. Status: PARTIALLY COMPLETE (Dropdown done)
----[ ] NAME:Apply glass-tier3 to Button component DESCRIPTION:Update src/components/shared/Button.tsx (if exists) or button styles: Apply glass-tier3 (92% opacity, 6px blur). Update hover states. Test all button variants (primary, danger, etc.).
----[ ] NAME:Apply glass-tier3 to Input component DESCRIPTION:Update src/components/shared/Input.tsx or input styles: Apply glass-tier3 with minimal blur (2px for readability). Update focus states. Test disabled states.
----[ ] NAME:Apply glass-tier3 to Chip component DESCRIPTION:Update Chip component: Apply glass-tier3 to unselected chips. Keep selected chips solid for contrast. Test width selection chips in modal.
----[ ] NAME:Test all interactive states with glass DESCRIPTION:Test hover, focus, active, disabled states for all form controls. Verify focus rings are clearly visible (2px solid blue-500). Test keyboard navigation.
----[ ] NAME:Screen reader testing for glass controls DESCRIPTION:Test with NVDA and JAWS screen readers. Verify all controls are announced correctly. Ensure glass effects don't interfere with accessibility.
---[ ] NAME:Phase 5: Polish & Optimization (Week 5) DESCRIPTION:Fine-tune blur values, optimize performance, final accessibility audit, user acceptance testing. Effort: 40 hours. Status: PENDING
----[ ] NAME:Fine-tune blur values based on feedback DESCRIPTION:Review all glass effects. Adjust blur radius if needed (12px→8px→4px for performance). Test on various devices. Gather user feedback on glass intensity.
----[ ] NAME:Optimize glassmorphism performance DESCRIPTION:Profile rendering performance. Optimize GPU compositing. Reduce blur complexity if needed. Ensure <50ms total rendering time. Test on low-end devices.
----[ ] NAME:Final accessibility audit for glassmorphism DESCRIPTION:Run comprehensive Lighthouse audit (target: ≥95 score). Verify WCAG 2.1 AA compliance. Test all accessibility media queries. Document any exceptions.
----[ ] NAME:User acceptance testing for glassmorphism DESCRIPTION:Conduct UAT with 5 HVAC professionals. Test scenarios: draw over light/dark/complex PDFs, use modal, test high contrast mode. Target: ≥80% preference, SUS score ≥80.
----[ ] NAME:Create glassmorphism documentation DESCRIPTION:Document glass tier system, usage guidelines, accessibility considerations, performance tips. Create developer guide for applying glass effects to new components.
--[ ] NAME:PART 2: Line Properties Modal Enhancement DESCRIPTION:Comprehensive modal enhancement with spacing, typography, animations, HVAC calculations. 8 weeks, 320 hours. Priority: HIGH. Status: Phase 1 Complete (14/103 tasks)
---[x] NAME:Phase 1: Foundation Layer (COMPLETE) DESCRIPTION:Extended Line type, created type definitions, constants, barrel exports. 14/14 tasks complete. Status: COMPLETE
---[ ] NAME:Phase 2: Design Refinements (Weeks 6-7) DESCRIPTION:Implement spacing, typography, animation, border improvements. 30 tasks: 9 HIGH, 13 MEDIUM, 8 LOW priority. Effort: 18-24 hours. Status: PENDING
----[ ] NAME:HIGH Priority Changes (9 tasks, 4-6 hours) DESCRIPTION:Critical spacing, typography, and border improvements. Must-have changes that transform modal from functional to polished. ROI: 5/5 stars each.
-----[ ] NAME:Increase modal padding to 20px DESCRIPTION:File: LinePropertiesModal.tsx line 217. Change className from 'p-4' to 'p-5'. Padding: 16px→20px. Provides better visual balance. Effort: 30 min. ROI: 5/5
-----[ ] NAME:Increase header-tabs separator to 12px DESCRIPTION:File: LinePropertiesModal.tsx line 248. Change Separator className from 'my-2' to 'my-3'. Margin: 8px→12px. Better breathing room. Effort: 15 min. ROI: 5/5
-----[ ] NAME:Increase tabs-content separator to 12px DESCRIPTION:File: LinePropertiesModal.tsx line 256. Change Separator className from 'my-2' to 'my-3'. Margin: 8px→12px. Improves hierarchy. Effort: 15 min. ROI: 5/5
-----[ ] NAME:Increase content-footer separator to 16px DESCRIPTION:File: LinePropertiesModal.tsx line 285. Change Separator className from 'my-2' to 'my-4'. Margin: 8px→16px. Emphasizes actions. Effort: 15 min. ROI: 5/5
-----[ ] NAME:Increase header height to 40px DESCRIPTION:File: ModalHeader.tsx line 58. Change className from 'h-8' to 'h-10', 'px-4' to 'px-0 py-1'. Height: 32px→40px. More prominent header. Effort: 30 min. ROI: 5/5
-----[ ] NAME:Increase modal title to 16px DESCRIPTION:File: ModalHeader.tsx line 63. Change className from 'text-sm' to 'text-base'. Font: 14px→16px. Establishes clear hierarchy. Effort: 15 min. ROI: 5/5
-----[ ] NAME:Add modal outer border (1px neutral-200) DESCRIPTION:File: LinePropertiesModal.tsx line 217. Add 'border border-neutral-200' to className. Improves modal definition. Effort: 15 min. ROI: 5/5
-----[ ] NAME:Fix active tab styling DESCRIPTION:File: TabBar.tsx line 113. Update active tab: font-semibold, border-b-2 border-blue-600 (not neutral-900). Add hover:text-neutral-700 to inactive. Font: 12px→13px. Effort: 45 min. ROI: 5/5
-----[ ] NAME:Standardize focus rings across all interactive elements DESCRIPTION:Apply 'focus:outline-2 focus:outline-solid focus:outline-blue-500 focus:outline-offset-2' to all buttons, inputs, dropdowns. Ensure 2px solid blue-500 with 2px offset. Effort: 2 hours. ROI: 4/5
----[ ] NAME:MEDIUM Priority Changes (13 tasks, 6-8 hours) DESCRIPTION:Usability and polish improvements. Should-have changes that significantly improve consistency. ROI: 3-4/5 stars each.
-----[ ] NAME:Increase Properties tab spacing to 16px DESCRIPTION:File: PropertiesTab.tsx line 101. Change 'space-y-3' to 'space-y-4'. Gap: 12px→16px. Better dropdown separation. Effort: 15 min. ROI: 4/5
-----[ ] NAME:Increase Advanced tab spacing to 16px DESCRIPTION:File: AdvancedTab.tsx line 105. Change 'space-y-3' to 'space-y-4'. Gap: 12px→16px. Better section separation. Effort: 15 min. ROI: 4/5
-----[ ] NAME:Reduce expandable section bottom padding to 12px DESCRIPTION:File: ExpandableSection.tsx line 103. Change 'pb-4' to 'pb-3'. Padding: 16px→12px. Tighter connection to button. Effort: 15 min. ROI: 3/5
-----[ ] NAME:Increase tab gap to 4px DESCRIPTION:File: TabBar.tsx line 93. Change 'gap-0.5' to 'gap-1'. Gap: 2px→4px. Clearer tab separation. Effort: 15 min. ROI: 3/5
-----[ ] NAME:Increase footer button gap to 8px DESCRIPTION:File: ModalFooter.tsx line 63. Change 'gap-1' to 'gap-2', 'p-2' to 'px-0 py-0'. Gap: 4px→8px. Better button clarity. Effort: 15 min. ROI: 3/5
-----[ ] NAME:Increase tab labels to 13px DESCRIPTION:File: TabBar.tsx line 113. Change 'text-xs' to 'text-[13px]'. Font: 12px→13px. Improves readability. Effort: 15 min. ROI: 3/5
-----[ ] NAME:Reduce helper text to 11px DESCRIPTION:File: Input.tsx line 218. Change 'text-xs' to 'text-[11px]'. Font: 12px→11px. Better hierarchy (labels 12px > helper 11px). Effort: 30 min. ROI: 3/5
-----[ ] NAME:Add tab bar bottom border DESCRIPTION:File: TabBar.tsx line 93. Add 'border-b border-neutral-200' to className. Creates baseline for tabs. Effort: 15 min. ROI: 3/5
-----[ ] NAME:Improve modal open/close animation DESCRIPTION:File: useModalAnimation.ts. Update to symmetric 200ms timing: open with ease-out, close with ease-in. Scale 0.95→1.0. Effort: 1 hour. ROI: 3/5
-----[ ] NAME:Add tab content fade transition DESCRIPTION:File: LinePropertiesModal.tsx. Add 'animate-in fade-in duration-150' to tab panel content. Prevents jarring content swap. Effort: 30 min. ROI: 3/5
-----[ ] NAME:Add dropdown close animation DESCRIPTION:File: Dropdown.tsx line 248. Add conditional animation: open with ease-out, close with ease-in (150ms). Add pointer-events-none when closed. Effort: 30 min. ROI: 3/5
-----[ ] NAME:Standardize icon sizing (14px chevrons) DESCRIPTION:Update all chevron icons to 'w-3.5 h-3.5' (14px). Ensure consistent icon sizing across modal. Effort: 1 hour. ROI: 3/5
-----[ ] NAME:Improve shadow hierarchy DESCRIPTION:Modal: shadow-xl. Dropdown: shadow-lg. Ensure proper elevation through shadow layers. Effort: 30 min. ROI: 3/5
----[ ] NAME:LOW Priority Changes (8 tasks, 8-10 hours) DESCRIPTION:Nice-to-have polish improvements. Minor enhancements with minimal impact on core experience. ROI: 1-2/5 stars each.
---[ ] NAME:Phase 3: Utility Layer (Week 8) DESCRIPTION:Implement HVAC calculation functions and modal positioning logic. 10 tasks. Effort: 40 hours. Status: PENDING
----[ ] NAME:Create calculateVelocity function (Wright Equation) DESCRIPTION:File: src/utils/hvac/calculations.ts. Implement V = (CFM × 144) / (W² × π/4). Return velocity in fpm. Handle edge cases (zero width, negative CFM). Effort: 4 hours.
----[ ] NAME:Create calculateFriction function (Wright Equation) DESCRIPTION:File: src/utils/hvac/calculations.ts. Implement F = (0.109136 × Q^1.9) / (D^5.02) with equivalent diameter calculation. Return friction in in.wc/100ft. Effort: 4 hours.
----[ ] NAME:Create calculateVelocityPressure function DESCRIPTION:File: src/utils/hvac/calculations.ts. Implement VP = (V / 4005)². Return velocity pressure in inches water column. Effort: 2 hours.
----[ ] NAME:Create formatCalculationResult function DESCRIPTION:File: src/utils/hvac/formatting.ts. Format calculation results with proper units and precision. Handle zero/null values. Effort: 3 hours.
----[ ] NAME:Create suggestOptimalWidth function DESCRIPTION:File: src/utils/hvac/calculations.ts. Suggest next larger standard size if velocity > 1500 fpm. Use standard sizes array. Effort: 4 hours.
----[ ] NAME:Create calculateModalPosition function DESCRIPTION:File: src/utils/modal/positioning.ts. Calculate optimal modal position near selected line. Handle viewport bounds, avoid overlaps. Effort: 5 hours.
----[ ] NAME:Create validateCFMInput function DESCRIPTION:File: src/utils/hvac/validation.ts. Validate CFM input (positive number, reasonable range). Return validation errors. Effort: 2 hours.
----[ ] NAME:Add unit tests for all calculation functions DESCRIPTION:Test all HVAC calculations against ASHRAE standards. Test edge cases (zero, negative, extreme values). Target: 100% coverage. Effort: 8 hours.
----[ ] NAME:Add unit tests for positioning logic DESCRIPTION:Test modal positioning with various viewport sizes and line positions. Test boundary conditions. Effort: 4 hours.
----[ ] NAME:Document all formulas and algorithms DESCRIPTION:Document HVAC formulas with references to ASHRAE standards. Add JSDoc comments with examples. Create calculation guide. Effort: 4 hours.
---[ ] NAME:Phase 4: Service Layer (Week 9) DESCRIPTION:Implement LinePropertiesService with CRUD operations, validation, batch updates. 8 tasks. Effort: 32 hours. Status: PENDING
----[ ] NAME:Create LinePropertiesService with CRUD operations DESCRIPTION:File: src/services/line/LinePropertiesService.ts. Implement create, read, update, delete operations for line properties. Handle single and batch operations. Effort: 8 hours.
----[ ] NAME:Implement validation logic for all properties DESCRIPTION:File: src/services/line/validation.ts. Validate width, type, CFM, notes. Return structured validation errors. Effort: 6 hours.
----[ ] NAME:Implement batch update operations DESCRIPTION:Add batch update methods to LinePropertiesService. Handle partial updates, mixed values. Optimize for performance. Effort: 6 hours.
----[ ] NAME:Implement mixed value detection for multi-select DESCRIPTION:Detect when selected lines have different values for same property. Return 'Mixed' indicator. Effort: 4 hours.
----[ ] NAME:Add error handling and recovery DESCRIPTION:Implement try-catch blocks, error logging, user-friendly error messages. Add rollback for failed batch operations. Effort: 4 hours.
----[ ] NAME:Add unit tests for all service methods DESCRIPTION:Test all CRUD operations, validation, batch updates. Mock dependencies. Target: 100% coverage. Effort: 6 hours.
----[ ] NAME:Add integration tests for service layer DESCRIPTION:Test service integration with state management. Test error scenarios. Effort: 4 hours.
----[ ] NAME:Document service API DESCRIPTION:Create comprehensive API documentation. Add usage examples. Document error codes. Effort: 2 hours.
---[ ] NAME:Phase 5: Shared UI Components (Week 10) DESCRIPTION:Build reusable UI components for modal. 10 tasks. Effort: 40 hours. Status: PENDING
---[ ] NAME:Phase 6: Properties Tab Components (Week 11) DESCRIPTION:Build Properties tab specific components. 8 tasks. Effort: 32 hours. Status: PENDING
---[ ] NAME:Phase 7: Calculations Tab Components (Week 11) DESCRIPTION:Build Calculations tab with real-time HVAC calculations. 6 tasks. Effort: 24 hours. Status: PENDING
---[ ] NAME:Phase 8: Advanced Tab Components (Week 12) DESCRIPTION:Build Advanced tab with CFM input and calculation results. 6 tasks. Effort: 24 hours. Status: PENDING
---[ ] NAME:Phase 9: Multi-Select Mode (Week 12) DESCRIPTION:Implement multi-select mode with batch editing. 8 tasks. Effort: 32 hours. Status: PENDING
---[ ] NAME:Phase 10: Main Modal Assembly (Week 13) DESCRIPTION:Assemble all components into final modal. 5 tasks. Effort: 20 hours. Status: PENDING
---[ ] NAME:Phase 11: Styling & Design Tokens (Week 13) DESCRIPTION:Apply final styling and design tokens. 4 tasks. Effort: 16 hours. Status: PENDING
---[ ] NAME:Phase 12: Accessibility Features (Week 13) DESCRIPTION:Implement comprehensive accessibility features. 6 tasks. Effort: 24 hours. Status: PENDING
---[ ] NAME:Phase 13: Integration & Testing (Week 13) DESCRIPTION:Integration testing, bug fixes, documentation. 8 tasks. Effort: 32 hours. Status: PENDING
--[ ] NAME:PART 3: Cross-Feature Integration & Testing DESCRIPTION:Integration testing, accessibility compliance, performance optimization, documentation. 2 weeks. Priority: HIGH.
---[ ] NAME:Integration Testing DESCRIPTION:Test glassmorphism + modal integration. Verify design system consistency. Test all component interactions. Effort: 16 hours.
---[ ] NAME:Accessibility Compliance Verification DESCRIPTION:Run comprehensive WCAG 2.1 AA audit. Test with screen readers (NVDA, JAWS). Verify keyboard navigation. Test high contrast, reduced motion, reduced transparency modes. Effort: 12 hours.
---[ ] NAME:Performance Optimization DESCRIPTION:Profile rendering performance. Optimize GPU usage. Ensure <27ms total UI rendering. Test on low-end devices. Effort: 12 hours.
---[ ] NAME:Cross-Browser Testing DESCRIPTION:Test in Chrome 76+, Firefox 103+, Safari 9+, Edge 79+. Verify fallbacks in IE11. Test on BrowserStack. Effort: 8 hours.
---[ ] NAME:User Acceptance Testing (UAT) DESCRIPTION:Conduct UAT with 20 users (10 HVAC professionals, 10 new users). 2-week beta period. Collect feedback. Target: ≥4.5/5 satisfaction. Effort: 16 hours.
---[ ] NAME:Documentation DESCRIPTION:Create user documentation, developer documentation, API reference. Update README. Create video tutorials. Effort: 16 hours.
---[ ] NAME:Final Bug Fixes & Polish DESCRIPTION:Address all critical and major bugs from testing. Final UI polish. Code cleanup. Effort: 16 hours.